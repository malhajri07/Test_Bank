{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ certification.name }} - {% trans "Exam Stellar" %}{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="bg-white border-b border-gray-200">
    <div class="max-w-9xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% include 'includes/breadcrumbs.html' with items=breadcrumbs %}
        <h1 class="text-4xl font-bold text-[#000000] mt-4">
            {{ certification.name }}
        </h1>
        {% if certification.description %}
        <p class="text-xl text-[#666666] mt-2">{{ certification.description }}</p>
        {% endif %}
    </div>
</div>

<!-- Test Bank Grid -->
<div class="max-w-9xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="mb-6 flex items-center justify-between">
        <p class="text-[#666666]">
            {% blocktrans count count=test_banks|length %}{{ count }} test bank available{% plural %}{{ count }} test banks available{% endblocktrans %}
        </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        {% for test_bank in test_banks %}
        <a href="{% url 'catalog:testbank_detail' slug=test_bank.slug %}" class="block h-full">
            <div class="bg-white h-full transition-all duration-200 hover:shadow-lg overflow-hidden flex flex-col">
                <!-- Test Bank Image - Udemy Style -->
                {% if test_bank.image %}
                <div class="h-40 bg-gray-200 relative overflow-hidden">
                    <img src="{{ test_bank.image.url }}" alt="{{ test_bank.title }}" class="w-full h-full object-cover">
                    <!-- Difficulty Label -->
                    <span class="absolute top-2 right-2 px-2 py-0.5 text-[10px] font-bold rounded shadow-sm backdrop-blur-sm z-20
                        {% if test_bank.difficulty_level == 'easy' %}bg-green-100/90 text-green-700 border border-green-200
                        {% elif test_bank.difficulty_level == 'medium' %}bg-yellow-100/90 text-yellow-700 border border-yellow-200
                        {% else %}bg-red-100/90 text-red-700 border border-red-200{% endif %}">
                        {{ test_bank.get_difficulty_level_display }}
                    </span>
                </div>
                {% else %}
                <div class="h-40 bg-gradient-to-br from-[#5624d0] to-[#4a1fb8] relative overflow-hidden flex items-center justify-center">
                    <div class="text-white text-4xl font-bold opacity-50">{{ test_bank.title|first|upper }}</div>
                    <!-- Difficulty Label -->
                    <span class="absolute top-2 right-2 px-2 py-0.5 text-[10px] font-bold rounded shadow-sm backdrop-blur-sm z-20
                        {% if test_bank.difficulty_level == 'easy' %}bg-green-100/90 text-green-700 border border-green-200
                        {% elif test_bank.difficulty_level == 'medium' %}bg-yellow-100/90 text-yellow-700 border border-yellow-200
                        {% else %}bg-red-100/90 text-red-700 border border-red-200{% endif %}">
                        {{ test_bank.get_difficulty_level_display }}
                    </span>
                </div>
                {% endif %}
                
                <div class="p-4 flex-1 flex flex-col">
                    <h3 class="text-sm font-bold text-gray-900 mb-1 line-clamp-2 h-10">
                        {{ test_bank.title }}
                    </h3>
                    
                    <!-- Rating - Udemy Style -->
                    <div class="flex items-center mb-2">
                        {% if test_bank.average_rating > 0 %}
                        <span class="text-sm font-bold text-gray-900 mr-1">{{ test_bank.average_rating|floatformat:1 }}</span>
                        <div class="flex items-center mr-1">
                            {% with rating_int=test_bank.average_rating|floatformat:0 %}
                            {% for i in "12345"|make_list %}
                                {% if forloop.counter <= rating_int|add:"0" %}
                                    <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
                                        <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                    </svg>
                                {% else %}
                                    <svg class="w-3 h-3 text-gray-300 fill-current" viewBox="0 0 20 20">
                                        <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                    </svg>
                                {% endif %}
                            {% endfor %}
                            {% endwith %}
                        </div>
                        <span class="text-xs text-gray-600">({{ test_bank.total_ratings }})</span>
                        {% else %}
                        <span class="text-xs text-gray-600">{% trans "No ratings yet" %}</span>
                        {% endif %}
                    </div>
                    
                    <!-- User Count -->
                    <div class="text-xs text-gray-600 mb-2">
                        {{ test_bank.get_user_count }} {% trans "students" %}
                    </div>
                    
                    <!-- Price - Udemy Style -->
                    <div class="mt-auto">
                        <span class="text-lg font-bold text-gray-900">{% if test_bank.price == 0 %}{% trans "Free" %}{% else %}${{ test_bank.price }}{% endif %}</span>
                    </div>
                </div>
            </div>
        </a>
        {% empty %}
        <div class="col-span-full text-center py-16">
            <div class="max-w-md mx-auto">
                <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                </div>
                <p class="text-[#666666] text-lg mb-2">
                    {% trans "No test banks available" %}
                </p>
                <p class="text-[#666666] text-sm">
                    {% trans "in this certification at the moment" %}
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

